# Logfile created on 2018-07-13 23:04:38 +0200 by logger.rb/61378
D, [2018-07-13T23:04:38.906416 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "favorites"[0m
D, [2018-07-13T23:04:38.906950 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
D, [2018-07-13T23:04:38.907395 #5670] DEBUG -- :   [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "favorites" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "favoritable_id" integer NOT NULL, "favoritable_type" varchar NOT NULL, "favoritor_id" integer NOT NULL, "favoritor_type" varchar NOT NULL, "scope" varchar DEFAULT 'favorite' NOT NULL, "blocked" boolean DEFAULT 'f' NOT NULL, "created_at" datetime, "updated_at" datetime)[0m
D, [2018-07-13T23:04:38.911630 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
D, [2018-07-13T23:04:38.911883 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
D, [2018-07-13T23:04:38.912085 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "bands"[0m
D, [2018-07-13T23:04:38.912317 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "bands" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
D, [2018-07-13T23:04:38.912576 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "somes"[0m
D, [2018-07-13T23:04:38.912811 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "somes" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
D, [2018-07-13T23:04:38.913249 #5670] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
D, [2018-07-13T23:04:38.934037 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
D, [2018-07-13T23:04:38.934266 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
D, [2018-07-13T23:04:38.936827 #5670] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
D, [2018-07-13T23:04:38.940041 #5670] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
D, [2018-07-13T23:04:38.944524 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:38.945483 #5670] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-07-13 21:04:38.944823"], ["updated_at", "2018-07-13 21:04:38.944823"]]
D, [2018-07-13T23:04:38.945723 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
D, [2018-07-13T23:04:39.315121 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.318966 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.319706 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.319919 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.320279 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.320620 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.320791 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.323015 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.323566 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.323743 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.341616 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.341873 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.357662 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.356963"], ["updated_at", "2018-07-13 21:04:39.356963"]]
D, [2018-07-13T23:04:39.357923 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.358546 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.358740 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.359676 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.359187"], ["updated_at", "2018-07-13 21:04:39.359187"]]
D, [2018-07-13T23:04:39.359886 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.360875 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.363554 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.363810 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.364687 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.364047"], ["id", 1]]
D, [2018-07-13T23:04:39.364965 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.365510 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.366442 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.366695 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.367268 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.367795 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.368275 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.368462 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.368721 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.369026 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.369223 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.369479 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.369877 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.370048 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.370735 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.370928 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.371915 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.371450"], ["updated_at", "2018-07-13 21:04:39.371450"]]
D, [2018-07-13T23:04:39.372149 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.372621 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.372773 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.373640 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.373198"], ["updated_at", "2018-07-13 21:04:39.373198"]]
D, [2018-07-13T23:04:39.373836 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.374114 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.374744 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.374896 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.375798 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.375357"], ["updated_at", "2018-07-13 21:04:39.375357"]]
D, [2018-07-13T23:04:39.376000 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.376278 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.376455 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.376773 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.377172 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.377577 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.377768 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.378152 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.378636 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.378889 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.379261 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.379772 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.380003 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.381110 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.381377 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.382781 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.382101"], ["updated_at", "2018-07-13 21:04:39.382101"]]
D, [2018-07-13T23:04:39.383124 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.383767 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.384007 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.385097 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.384567"], ["updated_at", "2018-07-13 21:04:39.384567"]]
D, [2018-07-13T23:04:39.385327 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.396716 #5670] DEBUG -- :   [1m[36mBand Load (0.2ms)[0m  [1m[34mSELECT "bands".* FROM "bands" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "bands"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "Band"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "Band"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.397738 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "users"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "User"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.398096 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.398727 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.399322 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.399849 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.400053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.400324 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.400659 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.400836 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.401108 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.401499 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.401679 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.402457 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.402653 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.403683 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.403176"], ["updated_at", "2018-07-13 21:04:39.403176"]]
D, [2018-07-13T23:04:39.403898 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.404391 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.404541 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.405443 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.404987"], ["updated_at", "2018-07-13 21:04:39.404987"]]
D, [2018-07-13T23:04:39.405649 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.405917 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.406229 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.406644 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.407046 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.407247 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.407500 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.407837 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.408017 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.408274 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.408652 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.408828 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.409553 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.409781 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.410824 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.410328"], ["updated_at", "2018-07-13 21:04:39.410328"]]
D, [2018-07-13T23:04:39.411047 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.411549 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.411723 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.415528 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.414980"], ["updated_at", "2018-07-13 21:04:39.414980"]]
D, [2018-07-13T23:04:39.415748 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.416219 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 1 and favoritable_type = "Band") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.416641 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.417113 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.417494 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.417688 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.418181 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.418336 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.419269 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.418804"], ["updated_at", "2018-07-13 21:04:39.418804"]]
D, [2018-07-13T23:04:39.419473 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.420319 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"]]
D, [2018-07-13T23:04:39.420902 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.421602 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"]]
D, [2018-07-13T23:04:39.422285 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.422913 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.423113 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.423804 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.423347"], ["id", 1]]
D, [2018-07-13T23:04:39.424034 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.424620 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.424795 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.425133 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.425543 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.425939 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.426139 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.426367 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.426693 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.426865 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.427127 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.427505 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.427675 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.428296 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.428460 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.429914 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.429242"], ["updated_at", "2018-07-13 21:04:39.429242"]]
D, [2018-07-13T23:04:39.430207 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.430894 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.431236 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.432507 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.431928"], ["updated_at", "2018-07-13 21:04:39.431928"]]
D, [2018-07-13T23:04:39.432751 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.433427 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.433586 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.434551 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.434080"], ["updated_at", "2018-07-13 21:04:39.434080"]]
D, [2018-07-13T23:04:39.434755 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.435137 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" ORDER BY "favorites"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.435969 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.436214 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.436533 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.436952 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.437373 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.437555 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.437811 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.438152 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.438320 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.438612 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.438977 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.439162 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.439844 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.440030 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.441003 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.440509"], ["updated_at", "2018-07-13 21:04:39.440509"]]
D, [2018-07-13T23:04:39.441207 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.441680 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.441853 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.442737 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.442286"], ["updated_at", "2018-07-13 21:04:39.442286"]]
D, [2018-07-13T23:04:39.442931 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.443230 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" ORDER BY "favorites"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.443899 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.444149 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.444526 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.444997 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.445437 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.445658 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.445893 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.446224 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.446417 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.446748 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.447138 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.447329 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.448286 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.448511 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.449569 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.449057"], ["updated_at", "2018-07-13 21:04:39.449057"]]
D, [2018-07-13T23:04:39.449778 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.450270 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.450438 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.451309 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.450866"], ["updated_at", "2018-07-13 21:04:39.450866"]]
D, [2018-07-13T23:04:39.451504 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.451953 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 1 and favoritable_type = "Band") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.452372 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.453093 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"]]
D, [2018-07-13T23:04:39.458178 #5670] DEBUG -- :   [1m[36mBand Load (0.1ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.458935 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.459419 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.459711 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.460136 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.460691 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.461288 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.461566 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.461860 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.462226 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.462396 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.462669 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.463065 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.463236 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.463931 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.464094 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.465339 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.464723"], ["updated_at", "2018-07-13 21:04:39.464723"]]
D, [2018-07-13T23:04:39.465593 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.466106 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.466257 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.467171 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.466709"], ["updated_at", "2018-07-13 21:04:39.466709"]]
D, [2018-07-13T23:04:39.467391 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.468026 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.468589 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.468771 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.469088 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.469595 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.470023 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.470205 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.470459 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.470798 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.470995 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.471249 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.471635 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.471805 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.472476 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.472639 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.473648 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.473162"], ["updated_at", "2018-07-13 21:04:39.473162"]]
D, [2018-07-13T23:04:39.473858 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.474345 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.474495 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.475380 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.474960"], ["updated_at", "2018-07-13 21:04:39.474960"]]
D, [2018-07-13T23:04:39.475791 #5670] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.476424 #5670] DEBUG -- :   [1m[36mFavorite Load (0.2ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 1 and favoritable_type = "Band") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.477032 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.477992 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT  1 AS one FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? LIMIT ?) subquery_for_count[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.478184 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.478504 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.478982 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.479429 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.479622 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.479883 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.480222 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.480392 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.480666 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.481177 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.481427 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.482345 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.482596 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.483780 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.483265"], ["updated_at", "2018-07-13 21:04:39.483265"]]
D, [2018-07-13T23:04:39.483992 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.484486 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.484651 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.485533 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.485090"], ["updated_at", "2018-07-13 21:04:39.485090"]]
D, [2018-07-13T23:04:39.485727 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.486383 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."id" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["id", 1]]
D, [2018-07-13T23:04:39.486852 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.487122 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.487431 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.487841 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.488248 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.488435 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.488688 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.488996 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.489185 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.489433 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.489815 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.489988 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.490670 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.490832 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.492042 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.491478"], ["updated_at", "2018-07-13 21:04:39.491478"]]
D, [2018-07-13T23:04:39.492298 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.492801 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.492953 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.493835 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.493390"], ["updated_at", "2018-07-13 21:04:39.493390"]]
D, [2018-07-13T23:04:39.494029 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.494328 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.494703 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.494896 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.495379 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.495558 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.496477 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.496015"], ["updated_at", "2018-07-13 21:04:39.496015"]]
D, [2018-07-13T23:04:39.496695 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.497557 #5670] DEBUG -- :   [1m[36mBand Load (0.1ms)[0m  [1m[34mSELECT  "bands".* FROM "bands" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "bands"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? LIMIT ?[0m  [["favoritable_type", "Band"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.497849 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.498346 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.498816 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.499239 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.499432 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.499681 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.500021 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.500202 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.500471 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.500840 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.501010 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.501690 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.501862 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.502848 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.502368"], ["updated_at", "2018-07-13 21:04:39.502368"]]
D, [2018-07-13T23:04:39.503074 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.503571 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.503735 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.504645 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.504179"], ["updated_at", "2018-07-13 21:04:39.504179"]]
D, [2018-07-13T23:04:39.504863 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.505052 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.505468 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.505915 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.506339 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.506533 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.506786 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.507191 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.507384 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.507663 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.508123 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.508340 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.509131 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.509344 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.510512 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.509943"], ["updated_at", "2018-07-13 21:04:39.509943"]]
D, [2018-07-13T23:04:39.510766 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.511356 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.511539 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.512578 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.512054"], ["updated_at", "2018-07-13 21:04:39.512054"]]
D, [2018-07-13T23:04:39.512832 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.513589 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.514234 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.514420 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.515384 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.514902"], ["updated_at", "2018-07-13 21:04:39.514902"]]
D, [2018-07-13T23:04:39.515593 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.516220 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.516431 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.516751 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.517178 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.517596 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.517792 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.518041 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.518385 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.518565 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.518833 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.519222 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.519407 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.520099 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.520276 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.521297 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.520792"], ["updated_at", "2018-07-13 21:04:39.520792"]]
D, [2018-07-13T23:04:39.522963 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.523548 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.523710 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.524841 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.524251"], ["updated_at", "2018-07-13 21:04:39.524251"]]
D, [2018-07-13T23:04:39.525125 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.526087 #5670] DEBUG -- :   [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.526990 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.527181 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.527657 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.528147 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.528590 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.528779 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.529033 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.529360 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.529529 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.529796 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.530170 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.530342 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.531008 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.531195 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.532211 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.531723"], ["updated_at", "2018-07-13 21:04:39.531723"]]
D, [2018-07-13T23:04:39.532445 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.532932 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.533082 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.533958 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.533513"], ["updated_at", "2018-07-13 21:04:39.533513"]]
D, [2018-07-13T23:04:39.534153 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.534801 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.535603 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_id", 2], ["favoritable_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.535860 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.536125 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.536294 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.536856 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.537051 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.537364 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.537785 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.538254 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.538450 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.538712 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.539032 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.539228 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.539476 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.539857 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.540028 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.540686 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.540864 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.541844 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.541362"], ["updated_at", "2018-07-13 21:04:39.541362"]]
D, [2018-07-13T23:04:39.542048 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.542523 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.542672 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.543531 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.543096"], ["updated_at", "2018-07-13 21:04:39.543096"]]
D, [2018-07-13T23:04:39.543756 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.543997 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.544303 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.544666 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.545068 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.545246 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.545492 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.545831 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.546000 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.546273 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.546637 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.546825 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.547438 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.547619 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.548592 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.548114"], ["updated_at", "2018-07-13 21:04:39.548114"]]
D, [2018-07-13T23:04:39.548795 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.549262 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.549431 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.550307 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.549856"], ["updated_at", "2018-07-13 21:04:39.549856"]]
D, [2018-07-13T23:04:39.550502 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.550801 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.551038 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.551227 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.551518 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.551931 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.552321 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.552520 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.552774 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.553081 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.553272 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.553544 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.554211 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.554498 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.555203 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.555373 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.556381 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.555876"], ["updated_at", "2018-07-13 21:04:39.555876"]]
D, [2018-07-13T23:04:39.556588 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.557101 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.557253 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.558185 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.557675"], ["updated_at", "2018-07-13 21:04:39.557675"]]
D, [2018-07-13T23:04:39.558483 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.559298 #5670] DEBUG -- :   [1m[36mFavorite Load (0.2ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.559803 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.560082 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.560404 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.560797 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.561215 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.561395 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.561658 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.562005 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.562174 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.562461 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.562817 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.563004 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.563652 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.563814 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.565053 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.564373"], ["updated_at", "2018-07-13 21:04:39.564373"]]
D, [2018-07-13T23:04:39.565376 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.565892 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.566066 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.566949 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.566503"], ["updated_at", "2018-07-13 21:04:39.566503"]]
D, [2018-07-13T23:04:39.567149 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.567849 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.568472 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.568703 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.569484 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.568920"], ["id", 1]]
D, [2018-07-13T23:04:39.569728 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.570171 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.570833 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.571349 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.571823 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.572442 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.572896 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.573953 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "users"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "User"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.574735 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.575586 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "users"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "User"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.575812 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.576288 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.576788 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.577249 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.577442 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.577630 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.577956 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.578367 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.578749 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.578924 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.579185 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.579496 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.579692 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.579940 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.580323 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.580495 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.581298 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.581567 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.582753 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.582256"], ["updated_at", "2018-07-13 21:04:39.582256"]]
D, [2018-07-13T23:04:39.582987 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.583488 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.583640 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.584522 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.584070"], ["updated_at", "2018-07-13 21:04:39.584070"]]
D, [2018-07-13T23:04:39.584715 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.585259 #5670] DEBUG -- :   [1m[36mFavorite Load (0.2ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 1 and favoritable_type = "Band") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.585840 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.586276 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.586723 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.586928 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.587429 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.587583 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.588517 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.588046"], ["updated_at", "2018-07-13 21:04:39.588046"]]
D, [2018-07-13T23:04:39.588744 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.589515 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT  1 AS one FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ? LIMIT ?) subquery_for_count[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.589808 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.590131 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.590560 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.590995 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.591178 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.591437 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.591760 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.591961 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.592251 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.592662 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.592845 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.593527 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.593702 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.594750 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.594228"], ["updated_at", "2018-07-13 21:04:39.594228"]]
D, [2018-07-13T23:04:39.594983 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.595467 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.595617 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.596522 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.596061"], ["updated_at", "2018-07-13 21:04:39.596061"]]
D, [2018-07-13T23:04:39.596724 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.597389 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.598075 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.598257 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.598656 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.599156 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.599574 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.599757 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.600006 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.600332 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.600514 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.600869 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.601339 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.601583 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.602417 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.602635 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.603751 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.603238"], ["updated_at", "2018-07-13 21:04:39.603238"]]
D, [2018-07-13T23:04:39.603961 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.604457 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.604607 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.605475 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.605035"], ["updated_at", "2018-07-13 21:04:39.605035"]]
D, [2018-07-13T23:04:39.605683 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.606125 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 1 and favoritable_type = "Band") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.606541 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.607194 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.607686 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.608238 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.608641 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.609353 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.609943 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.610387 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.611242 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.611479 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.612016 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.612542 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.613025 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.613234 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.613506 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.613864 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.614055 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.614339 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.614760 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.614963 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.615678 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.615858 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.617187 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.616531"], ["updated_at", "2018-07-13 21:04:39.616531"]]
D, [2018-07-13T23:04:39.617439 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.617985 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.618180 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.619193 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.618694"], ["updated_at", "2018-07-13 21:04:39.618694"]]
D, [2018-07-13T23:04:39.619422 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.620212 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.620897 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.621137 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.621899 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.621377"], ["id", 1]]
D, [2018-07-13T23:04:39.622144 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.622613 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE (favoritor_id = 1 and favoritor_type = "User" and favoritable_id = 2 and favoritable_type = "User") ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.623307 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.623507 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.623861 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.624357 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.626303 #5670] DEBUG -- :   [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.626580 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.626883 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.627248 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.627427 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.627748 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.628178 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.628461 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.629130 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.629305 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.630292 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.629804"], ["updated_at", "2018-07-13 21:04:39.629804"]]
D, [2018-07-13T23:04:39.630501 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.630987 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.631245 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.632498 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.631992"], ["updated_at", "2018-07-13 21:04:39.631992"]]
D, [2018-07-13T23:04:39.632704 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.633019 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.633676 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_id", 2], ["favoritable_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.633894 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.634155 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.634291 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.634565 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.634741 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.635040 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.635438 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.635895 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.636109 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.636340 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.636681 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.636849 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.637130 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.637533 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.637704 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.638350 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.638512 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.639450 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.638990"], ["updated_at", "2018-07-13 21:04:39.638990"]]
D, [2018-07-13T23:04:39.639646 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.640103 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.640271 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.641126 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.640690"], ["updated_at", "2018-07-13 21:04:39.640690"]]
D, [2018-07-13T23:04:39.641315 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.641599 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.641976 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.642141 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.642604 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.642796 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.643690 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.643240"], ["updated_at", "2018-07-13 21:04:39.643240"]]
D, [2018-07-13T23:04:39.643910 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.644607 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"]]
D, [2018-07-13T23:04:39.645228 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.646037 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"]]
D, [2018-07-13T23:04:39.646737 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.647333 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.647666 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.648681 #5670] DEBUG -- :   [1m[36mFavorite Update (0.2ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.648033"], ["id", 1]]
D, [2018-07-13T23:04:39.648927 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.649712 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.649955 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.650524 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.651053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.651499 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.651711 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.651943 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.652280 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.652466 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.652741 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.653100 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.653296 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.653941 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.654114 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.655125 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.654628"], ["updated_at", "2018-07-13 21:04:39.654628"]]
D, [2018-07-13T23:04:39.655329 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.655824 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.655974 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.656849 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.656402"], ["updated_at", "2018-07-13 21:04:39.656402"]]
D, [2018-07-13T23:04:39.657042 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.657348 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" ORDER BY "favorites"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.658103 #5670] DEBUG -- :   [1m[36mBand Load (0.1ms)[0m  [1m[34mSELECT  "bands".* FROM "bands" WHERE "bands"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.658316 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.658779 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.659236 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.659672 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.659855 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.660112 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.660429 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.660612 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.660877 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.661259 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.661432 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.662125 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.662287 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.663321 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.662785"], ["updated_at", "2018-07-13 21:04:39.662785"]]
D, [2018-07-13T23:04:39.663562 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.664051 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.664239 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.665403 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.664761"], ["updated_at", "2018-07-13 21:04:39.664761"]]
D, [2018-07-13T23:04:39.665675 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.666028 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.666186 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.667088 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.667869 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.668262 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.668503 #5670] DEBUG -- :   [1m[36mUser Destroy (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.668674 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.668983 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.669167 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.669506 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.669929 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.670367 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.670551 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.670803 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.671127 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.671298 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.671575 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.671960 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.672133 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.672790 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.672956 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.673922 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.673446"], ["updated_at", "2018-07-13 21:04:39.673446"]]
D, [2018-07-13T23:04:39.674126 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.674607 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.674770 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.675702 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.675250"], ["updated_at", "2018-07-13 21:04:39.675250"]]
D, [2018-07-13T23:04:39.675899 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.676713 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "bands"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "Band"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "Band"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.677492 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritable_id" = "users"."id" AND "favorites"."favoritable_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ?[0m  [["favoritable_type", "User"], ["blocked", "f"], ["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.677710 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.678014 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.678378 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.678780 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.678991 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.679221 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.679552 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.679739 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.680010 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.680381 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.680574 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.681258 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.681430 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.682420 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.681950"], ["updated_at", "2018-07-13 21:04:39.681950"]]
D, [2018-07-13T23:04:39.682700 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.683187 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.683340 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.684392 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.683780"], ["updated_at", "2018-07-13 21:04:39.683780"]]
D, [2018-07-13T23:04:39.684642 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.685426 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.685603 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.686093 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.686564 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.687019 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.687284 #5670] DEBUG -- :   [1m[36mUser Destroy (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.687458 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.688057 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.688269 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.688584 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.689009 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.689429 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.689612 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.689860 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.690191 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.690359 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.690683 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.691070 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.691243 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.691922 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.692085 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.693059 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.692574"], ["updated_at", "2018-07-13 21:04:39.692574"]]
D, [2018-07-13T23:04:39.693262 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.693742 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.693891 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.694755 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.694318"], ["updated_at", "2018-07-13 21:04:39.694318"]]
D, [2018-07-13T23:04:39.694949 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.695581 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.695733 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.696597 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.696175"], ["updated_at", "2018-07-13 21:04:39.696175"]]
D, [2018-07-13T23:04:39.696819 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.697100 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" ORDER BY "favorites"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
D, [2018-07-13T23:04:39.697611 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.697879 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.698198 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.698582 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.698975 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.699167 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.699403 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.699730 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.699910 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.700511 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.700992 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.701190 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.701895 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.702076 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.703057 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.702570"], ["updated_at", "2018-07-13 21:04:39.702570"]]
D, [2018-07-13T23:04:39.703260 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.703741 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.703891 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.704778 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.704329"], ["updated_at", "2018-07-13 21:04:39.704329"]]
D, [2018-07-13T23:04:39.704986 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.705506 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.706065 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.706457 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.707072 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.707575 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.707958 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.708555 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.709068 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.709443 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.710170 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.710365 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.711005 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.711429 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.711833 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.712029 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.712284 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.712614 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.712786 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.713062 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.713439 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.713619 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.713876 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.714204 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.714380 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.717214 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.717923 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.718179 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.720220 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.720763 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.720943 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.721684 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.721866 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.722955 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.722407"], ["updated_at", "2018-07-13 21:04:39.722407"]]
D, [2018-07-13T23:04:39.723202 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.725098 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.725436 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.726079 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "blocked", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "t"], ["created_at", "2018-07-13 21:04:39.725595"], ["updated_at", "2018-07-13 21:04:39.725595"]]
D, [2018-07-13T23:04:39.726263 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.726956 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:39.727162 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.727510 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.727927 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.728338 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.728520 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.728773 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.729088 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.729275 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.729552 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.729908 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.730101 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.730373 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.730713 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.730878 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.731163 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.732034 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.2ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.732383 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.732867 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.733379 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.733605 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.734413 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.734616 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.735771 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.735235"], ["updated_at", "2018-07-13 21:04:39.735235"]]
D, [2018-07-13T23:04:39.736034 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.736589 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.736760 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.737836 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.737253"], ["updated_at", "2018-07-13 21:04:39.737253"]]
D, [2018-07-13T23:04:39.738097 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.738851 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.739027 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.739951 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.739502"], ["updated_at", "2018-07-13 21:04:39.739502"]]
D, [2018-07-13T23:04:39.740146 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.740872 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.741478 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.741694 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.742369 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.741896"], ["id", 2]]
D, [2018-07-13T23:04:39.742597 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.743390 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.743575 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.743902 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.744327 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.744737 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.744918 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.745160 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.745490 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.745667 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.745935 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.746287 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.746484 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.746707 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.747158 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.747364 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.747636 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.748220 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.748467 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.748851 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.749418 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.749645 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.750405 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.750597 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.751589 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.751109"], ["updated_at", "2018-07-13 21:04:39.751109"]]
D, [2018-07-13T23:04:39.751797 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.752513 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.753122 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.753324 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.754025 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.753559"], ["id", 1]]
D, [2018-07-13T23:04:39.754249 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.754771 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.755028 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.755584 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "f"], ["updated_at", "2018-07-13 21:04:39.755168"], ["id", 1]]
D, [2018-07-13T23:04:39.755789 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.756449 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "t"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.756986 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "t"]]
D, [2018-07-13T23:04:39.757180 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.757521 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.757951 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.758338 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.758542 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.758796 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.759103 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.759280 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.759551 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.759928 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.760094 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.760314 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.760636 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.760819 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.761074 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.761476 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.761647 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.761934 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.762333 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.762530 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.763751 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.765162 #5670] DEBUG -- :   [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.766837 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.766189"], ["updated_at", "2018-07-13 21:04:39.766189"]]
D, [2018-07-13T23:04:39.767101 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.767596 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.768057 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:39.768336 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.768974 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.769158 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.770302 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.769698"], ["updated_at", "2018-07-13 21:04:39.769698"]]
D, [2018-07-13T23:04:39.770761 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.771799 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.772701 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.773510 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.773715 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.774112 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.774592 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.775207 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.775414 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.775687 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.776041 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.776219 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.776488 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.776871 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.777050 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.777302 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.777632 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.777792 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.778074 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.778454 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.778623 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.778906 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.779319 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.779488 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.780233 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.780412 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.781647 #5670] DEBUG -- :   [1m[36mFavorite Create (0.2ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.780927"], ["updated_at", "2018-07-13 21:04:39.780927"]]
D, [2018-07-13T23:04:39.782028 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.782794 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.782974 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.783946 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.783457"], ["updated_at", "2018-07-13 21:04:39.783457"]]
D, [2018-07-13T23:04:39.784155 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.784771 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.784921 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.785822 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.785375"], ["updated_at", "2018-07-13 21:04:39.785375"]]
D, [2018-07-13T23:04:39.786021 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.786815 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.787561 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.787742 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.788065 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.788620 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.789168 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.789442 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.789750 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.790208 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.790468 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.790851 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.791428 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.791704 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.792020 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.792480 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.792732 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.793153 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.793553 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.793751 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.794040 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.794423 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.794627 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.795313 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.795478 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.796481 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.795993"], ["updated_at", "2018-07-13 21:04:39.795993"]]
D, [2018-07-13T23:04:39.796683 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.796974 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.797437 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.797906 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.798414 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.798711 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.799017 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.799398 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.799570 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.799856 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.800233 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.800435 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.800659 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.800988 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.801149 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.801432 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.801831 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.802006 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.802286 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.802686 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.802866 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.803572 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.803763 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.804753 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.804267"], ["updated_at", "2018-07-13 21:04:39.804267"]]
D, [2018-07-13T23:04:39.804961 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.805626 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_id", 2], ["favoritable_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.805862 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.806114 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.806257 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.806954 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.807541 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "t"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.807728 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.808211 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.808680 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.809115 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.809303 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.809479 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.809744 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.810130 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.810504 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.810689 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.810946 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.811275 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.811460 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.811728 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.812115 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.812297 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.812538 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.812858 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.813030 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.813304 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.813697 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.813868 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.814160 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.814561 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.814750 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.815548 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.815775 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.816832 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.816324"], ["updated_at", "2018-07-13 21:04:39.816324"]]
D, [2018-07-13T23:04:39.817051 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.817800 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.818426 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.818657 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.819367 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.818889"], ["id", 1]]
D, [2018-07-13T23:04:39.819609 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.820116 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:39.820312 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.820615 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.821045 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.821448 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.821655 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.821924 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.822264 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.822448 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.822744 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.823138 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.823318 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.823574 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.823892 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.824070 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.824357 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.824765 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.824956 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.825248 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.825674 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.825864 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.827573 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.827777 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.828784 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.828288"], ["updated_at", "2018-07-13 21:04:39.828288"]]
D, [2018-07-13T23:04:39.828989 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.829298 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.829452 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.829926 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.830345 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.830743 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.831048 #5670] DEBUG -- :   [1m[36mUser Destroy (0.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.831295 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.831674 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites"[0m
D, [2018-07-13T23:04:39.831895 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.832465 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.833037 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.833559 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.833780 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.834089 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.834475 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.834704 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.835029 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.835423 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.835653 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.835943 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.836329 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.836525 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.836850 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.837288 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.837511 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.837863 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.838272 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.838446 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.839166 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.839332 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.840341 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.839855"], ["updated_at", "2018-07-13 21:04:39.839855"]]
D, [2018-07-13T23:04:39.840558 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.841265 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.841581 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.842204 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "blocked", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "t"], ["created_at", "2018-07-13 21:04:39.841740"], ["updated_at", "2018-07-13 21:04:39.841740"]]
D, [2018-07-13T23:04:39.842398 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.842882 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.843512 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.843691 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.844036 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.844450 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.844866 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.845046 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.845291 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.845620 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.845787 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.846067 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.846688 #5670] DEBUG -- :   [1m[36mBand Create (0.2ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.846975 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.847337 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.847734 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.847934 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.848287 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.848719 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.848901 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.849202 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.849614 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.849788 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.850509 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.850681 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.851721 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.851210"], ["updated_at", "2018-07-13 21:04:39.851210"]]
D, [2018-07-13T23:04:39.851924 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.852209 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.852596 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:39.852775 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.853496 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.854112 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.854335 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.855036 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.854558"], ["id", 1]]
D, [2018-07-13T23:04:39.855253 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.855817 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 3], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.856104 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.856743 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "blocked", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 3], ["favoritor_type", "User"], ["blocked", "t"], ["created_at", "2018-07-13 21:04:39.856258"], ["updated_at", "2018-07-13 21:04:39.856258"]]
D, [2018-07-13T23:04:39.856934 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.857531 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ? LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "t"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.857988 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.858278 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.858596 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.858964 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.859351 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.859528 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.859781 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.860108 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.860275 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.860547 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.860920 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.861090 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.861340 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.861650 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.861835 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.862159 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.862533 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.862703 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.862995 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.863401 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.863572 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.864261 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.864422 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.865469 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.864952"], ["updated_at", "2018-07-13 21:04:39.864952"]]
D, [2018-07-13T23:04:39.865698 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.866413 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.867041 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.867243 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.867935 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.867458"], ["id", 1]]
D, [2018-07-13T23:04:39.868150 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.868618 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "t"]]
D, [2018-07-13T23:04:39.869050 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.869333 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.869636 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.870019 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.870424 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.870604 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.870841 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.871169 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.871350 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.871597 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.871979 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.872148 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.872398 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.872723 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.872883 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.873159 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.873540 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.873720 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.874013 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.874426 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.874600 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.875269 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.875429 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.876384 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.875918"], ["updated_at", "2018-07-13 21:04:39.875918"]]
D, [2018-07-13T23:04:39.876607 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.877084 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.877233 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.878219 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.877672"], ["updated_at", "2018-07-13 21:04:39.877672"]]
D, [2018-07-13T23:04:39.878468 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.879068 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.879235 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.880295 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.879796"], ["updated_at", "2018-07-13 21:04:39.879796"]]
D, [2018-07-13T23:04:39.880527 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.881330 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.882175 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.882452 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.883166 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.882670"], ["id", 2]]
D, [2018-07-13T23:04:39.883382 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.884092 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.884309 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.884686 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.885191 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.885617 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.885833 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.886065 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.886400 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.886580 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.886853 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.887206 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.887398 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.887635 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.887959 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.888122 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.888402 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.888766 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.888957 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.889245 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.889655 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.889828 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.890520 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.890684 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.891672 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.891190"], ["updated_at", "2018-07-13 21:04:39.891190"]]
D, [2018-07-13T23:04:39.891878 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.892358 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.892506 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.893461 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.892939"], ["updated_at", "2018-07-13 21:04:39.892939"]]
D, [2018-07-13T23:04:39.893676 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.894331 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.894486 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.895420 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.894942"], ["updated_at", "2018-07-13 21:04:39.894942"]]
D, [2018-07-13T23:04:39.895663 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.896572 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.897434 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.897675 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.897993 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.898538 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.899066 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.899270 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.899528 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.899880 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.900047 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.900312 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.900688 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.900876 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.901116 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.901424 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.901601 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.901877 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.902257 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.902429 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.902715 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.903119 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.903295 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.904018 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.904256 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.905270 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.904787"], ["updated_at", "2018-07-13 21:04:39.904787"]]
D, [2018-07-13T23:04:39.905474 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.906021 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.906487 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.906741 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.907146 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.907503 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"]]
D, [2018-07-13T23:04:39.907885 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.908130 #5670] DEBUG -- :   [1m[36mUser Destroy (0.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:39.908314 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.908859 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.909085 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.909402 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.909801 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.910197 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.910390 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.910645 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.910966 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.911142 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.911419 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.911785 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.911972 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.912216 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.912607 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.912771 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.913053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.913430 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.913615 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.913896 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.914297 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.914488 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.915252 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.915503 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.916594 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.916088"], ["updated_at", "2018-07-13 21:04:39.916088"]]
D, [2018-07-13T23:04:39.916815 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.917145 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.917543 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:39.917734 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.918389 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 3], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.918558 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.919530 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 3], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.919050"], ["updated_at", "2018-07-13 21:04:39.919050"]]
D, [2018-07-13T23:04:39.919739 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.920438 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ? LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.920974 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.921277 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.921623 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.923087 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.923515 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.923712 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.923962 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.924292 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.924474 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.924807 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.925221 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.925421 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.925674 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.925982 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.926162 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.926441 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.926875 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.927082 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.927387 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.927781 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.927978 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.928681 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.928876 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.929870 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.929385"], ["updated_at", "2018-07-13 21:04:39.929385"]]
D, [2018-07-13T23:04:39.930074 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.930425 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.930823 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:39.931003 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.931706 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 3], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.931938 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.933032 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 3], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.932531"], ["updated_at", "2018-07-13 21:04:39.932531"]]
D, [2018-07-13T23:04:39.933241 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.933979 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 3], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.934265 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.934610 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.935004 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.935405 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.935586 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.935833 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.936169 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.936335 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.936613 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.936992 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.937164 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.937415 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.937723 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.937882 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.938160 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.938553 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.938778 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.939067 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.939477 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.939649 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.940367 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.940568 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.941729 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.941156"], ["updated_at", "2018-07-13 21:04:39.941156"]]
D, [2018-07-13T23:04:39.941997 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.942749 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_id", 2], ["favoritable_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.943024 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.943279 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:39.943419 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.944091 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.944579 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:39.944762 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.945051 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.945463 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.945850 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.946102 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.946358 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.946684 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.946853 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.947125 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.947497 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.947667 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.947913 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.948310 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.948529 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.948926 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.949337 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.949530 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.949803 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.950212 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.950385 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.951077 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.951243 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.952233 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.951756"], ["updated_at", "2018-07-13 21:04:39.951756"]]
D, [2018-07-13T23:04:39.952467 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.952957 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 3], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.953106 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.953986 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 3], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.953547"], ["updated_at", "2018-07-13 21:04:39.953547"]]
D, [2018-07-13T23:04:39.954235 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.954737 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 4], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.954888 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.955775 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 4], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.955316"], ["updated_at", "2018-07-13 21:04:39.955316"]]
D, [2018-07-13T23:04:39.956000 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.956704 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.957175 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 3]]
D, [2018-07-13T23:04:39.958074 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ? OFFSET ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_type", "Band"], ["LIMIT", 1], ["OFFSET", 1]]
D, [2018-07-13T23:04:39.958511 #5670] DEBUG -- :   [1m[36mBand Load (0.0ms)[0m  [1m[34mSELECT "bands".* FROM "bands" WHERE "bands"."id" = ?[0m  [["id", 4]]
D, [2018-07-13T23:04:39.959338 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 3], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.960014 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 4], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.960224 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.960770 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.961273 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.961720 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.961907 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.962164 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.962491 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.962659 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.962928 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.963309 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.963477 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.963729 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.964049 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.964208 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.964481 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.964915 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.965138 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.965458 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.965895 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.966070 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.966776 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.966951 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.967953 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.967472"], ["updated_at", "2018-07-13 21:04:39.967472"]]
D, [2018-07-13T23:04:39.968167 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.968675 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.968879 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.969764 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.969310"], ["updated_at", "2018-07-13 21:04:39.969310"]]
D, [2018-07-13T23:04:39.969957 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.970565 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.970731 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.971720 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.971172"], ["updated_at", "2018-07-13 21:04:39.971172"]]
D, [2018-07-13T23:04:39.971934 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.972827 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.973660 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_type" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_type", "User"]]
D, [2018-07-13T23:04:39.973843 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.974189 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.974724 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.975209 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.975405 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.975651 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.976001 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.976169 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.976457 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.976817 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.977014 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.977299 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.977699 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.977883 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.978184 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.978647 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.978878 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.979197 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.979635 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.979812 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.980517 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.980716 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.981897 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.981292"], ["updated_at", "2018-07-13 21:04:39.981292"]]
D, [2018-07-13T23:04:39.982192 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.983060 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.983735 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.983969 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.984799 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:39.984209"], ["id", 1]]
D, [2018-07-13T23:04:39.985034 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.985653 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "t"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.985891 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.986249 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.986739 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.987514 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.987791 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.988090 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.988434 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.988603 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.988934 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.989339 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.989513 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.989775 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.990077 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:39.990266 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.990526 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.990931 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:39.991106 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.991389 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.991776 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:39.991974 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.992667 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:39.992880 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.993942 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:39.993421"], ["updated_at", "2018-07-13 21:04:39.993421"]]
D, [2018-07-13T23:04:39.994149 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.994915 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.995626 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:39.995816 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:39.996308 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:39.996791 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.997242 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:39.997432 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.997684 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.998136 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:39.998481 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.998817 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.999263 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:39.999446 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:39.999694 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.000029 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.000191 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.000483 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.000875 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.001053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.001334 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.001739 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.001917 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.002692 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.002933 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.004080 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.003561"], ["updated_at", "2018-07-13 21:04:40.003561"]]
D, [2018-07-13T23:04:40.004365 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.004888 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.005053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.005980 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.005507"], ["updated_at", "2018-07-13 21:04:40.005507"]]
D, [2018-07-13T23:04:40.006177 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.006814 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.007001 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.008063 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.007519"], ["updated_at", "2018-07-13 21:04:40.007519"]]
D, [2018-07-13T23:04:40.008306 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.009163 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.009955 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.010222 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.010563 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.010987 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.011409 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.011604 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.011862 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.012209 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.012377 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.012661 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.013049 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.013238 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.013496 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.013825 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.013993 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.014275 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.014674 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.014857 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.015173 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.015589 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.015783 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.016545 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.016726 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.019193 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.017301"], ["updated_at", "2018-07-13 21:04:40.017301"]]
D, [2018-07-13T23:04:40.019443 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.019995 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.020150 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.021119 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.020621"], ["updated_at", "2018-07-13 21:04:40.020621"]]
D, [2018-07-13T23:04:40.021349 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.021979 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.022132 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.023025 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.022581"], ["updated_at", "2018-07-13 21:04:40.022581"]]
D, [2018-07-13T23:04:40.023244 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.023961 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.024588 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.024789 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.025494 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:40.025015"], ["id", 3]]
D, [2018-07-13T23:04:40.025710 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.026456 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.026703 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.027045 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.027470 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.027882 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.028069 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.028316 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.028652 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.028819 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.029093 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.029475 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.029646 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.029902 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.030223 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.030387 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.030671 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.031067 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.031239 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.031618 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.032208 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.032552 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.033256 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.033421 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.034518 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.034016"], ["updated_at", "2018-07-13 21:04:40.034016"]]
D, [2018-07-13T23:04:40.034728 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.035448 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.036137 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.036349 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.037020 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:40.036557"], ["id", 1]]
D, [2018-07-13T23:04:40.037261 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.037821 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.037998 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.038329 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.038798 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.039211 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.039413 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.039639 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.039982 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.040150 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.040440 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.040800 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.040987 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.041235 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.041538 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.041718 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.042004 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.042376 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.042569 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.042853 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.043257 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.043430 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.044066 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.044258 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.045225 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.044755"], ["updated_at", "2018-07-13 21:04:40.044755"]]
D, [2018-07-13T23:04:40.045429 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.045915 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.046064 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.046933 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.046493"], ["updated_at", "2018-07-13 21:04:40.046493"]]
D, [2018-07-13T23:04:40.047144 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.047731 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.047896 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.049132 #5670] DEBUG -- :   [1m[36mFavorite Create (0.2ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.048487"], ["updated_at", "2018-07-13 21:04:40.048487"]]
D, [2018-07-13T23:04:40.049366 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.050348 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.051201 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "Band"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.051491 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.052391 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:40.051805"], ["id", 3]]
D, [2018-07-13T23:04:40.052696 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.053608 #5670] DEBUG -- :   [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "favorites" ON "favorites"."favoritor_id" = "users"."id" AND "favorites"."favoritor_type" = ? WHERE "favorites"."blocked" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."scope" = ?[0m  [["favoritor_type", "User"], ["blocked", "f"], ["favoritable_id", 1], ["favoritable_type", "Band"], ["favoritor_type", "User"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.053947 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.054469 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.054962 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.055398 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.055598 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.055835 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.056184 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.056353 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.056626 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.057021 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.057190 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.057435 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.057755 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.057933 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.058226 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.058595 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.058765 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.059053 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.059460 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.059632 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.060343 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.060531 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.061518 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.061036"], ["updated_at", "2018-07-13 21:04:40.061036"]]
D, [2018-07-13T23:04:40.061724 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.062377 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritable_id", 2], ["favoritable_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.062610 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.062846 #5670] DEBUG -- :   [1m[36mFavorite Destroy (0.1ms)[0m  [1m[31mDELETE FROM "favorites" WHERE "favorites"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.062980 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.063654 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.064127 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "t"]]
D, [2018-07-13T23:04:40.064309 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.064634 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.065032 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.065534 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.065754 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.066075 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.066451 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.066625 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.066906 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.067296 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.067494 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.067724 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.068057 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.068222 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.068491 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.068888 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.069067 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.069357 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.069758 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.069932 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.070656 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.070844 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.071859 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.071386"], ["updated_at", "2018-07-13 21:04:40.071386"]]
D, [2018-07-13T23:04:40.072112 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.072825 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.073142 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.073773 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "blocked", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "t"], ["created_at", "2018-07-13 21:04:40.073301"], ["updated_at", "2018-07-13 21:04:40.073301"]]
D, [2018-07-13T23:04:40.073972 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.074485 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "t"]]
D, [2018-07-13T23:04:40.074992 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
D, [2018-07-13T23:04:40.075289 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.075831 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.076333 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.076831 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.077024 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.077313 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.077631 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.077824 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.078100 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.078468 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.078653 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.078907 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.079210 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.079385 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.079666 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.080052 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.080227 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.080528 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.080918 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.081107 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.081849 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.082019 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.083057 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.082558"], ["updated_at", "2018-07-13 21:04:40.082558"]]
D, [2018-07-13T23:04:40.083267 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.084154 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.085103 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.085306 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.085632 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.086065 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.086463 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.086676 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.086924 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.087232 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.087423 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.087688 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.088078 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.088253 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.088497 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.088818 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.088992 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.089266 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.089648 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.089838 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.090114 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.090540 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.090714 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.091393 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.091571 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.092568 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.092075"], ["updated_at", "2018-07-13 21:04:40.092075"]]
D, [2018-07-13T23:04:40.092784 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.093070 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.093529 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:40.093756 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.094276 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.094455 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.095452 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.094953"], ["updated_at", "2018-07-13 21:04:40.094953"]]
D, [2018-07-13T23:04:40.095667 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.096534 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.096748 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.097771 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.097276"], ["updated_at", "2018-07-13 21:04:40.097276"]]
D, [2018-07-13T23:04:40.097985 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.098854 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.099696 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.100195 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.100988 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.101949 #5670] DEBUG -- :   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
D, [2018-07-13T23:04:40.102413 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.102966 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.103561 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.104156 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.104442 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.104781 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.105189 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.105380 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.105682 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.106098 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.106290 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.106534 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.106905 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.107140 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.107471 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.107891 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.108066 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.108377 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.108911 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.109115 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.110014 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.110214 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.111323 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.110792"], ["updated_at", "2018-07-13 21:04:40.110792"]]
D, [2018-07-13T23:04:40.111552 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.111877 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.112297 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:40.112499 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.113044 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.114416 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.115791 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.115137"], ["updated_at", "2018-07-13 21:04:40.115137"]]
D, [2018-07-13T23:04:40.116102 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.116862 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.117584 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.118138 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.118992 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 3], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.119481 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.119835 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.120362 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.120919 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.121529 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.121803 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.122059 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.122411 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.122606 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.122887 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.123250 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.123432 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.123703 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.124004 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.124187 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.124447 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.124838 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.125032 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.125300 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.125707 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.125881 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.126606 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.126787 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.127793 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.127301"], ["updated_at", "2018-07-13 21:04:40.127301"]]
D, [2018-07-13T23:04:40.127999 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.128301 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.128668 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Bob"]]
D, [2018-07-13T23:04:40.128867 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.129468 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 3], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.129626 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.130674 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 3], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.130175"], ["updated_at", "2018-07-13 21:04:40.130175"]]
D, [2018-07-13T23:04:40.130886 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.131602 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.131835 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.132344 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.132798 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.133249 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.133466 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.133695 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.134021 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.134187 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.134462 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.134847 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.135018 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.135267 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.135599 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.135758 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.136042 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.136408 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.136588 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.136880 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.137281 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.137454 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.138135 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.138328 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.139318 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.138835"], ["updated_at", "2018-07-13 21:04:40.138835"]]
D, [2018-07-13T23:04:40.139529 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.140161 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.140765 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.141198 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.141493 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.141783 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.142161 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.142568 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.142747 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.142995 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.143322 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.143489 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.143755 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.144126 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.144294 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.144540 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.144861 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.145035 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.145290 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.145689 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.145906 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.146241 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.146667 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.146874 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.147541 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.147732 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.149089 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.148308"], ["updated_at", "2018-07-13 21:04:40.148308"]]
D, [2018-07-13T23:04:40.149400 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.150403 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.151248 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.151561 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.152478 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:40.151831"], ["id", 1]]
D, [2018-07-13T23:04:40.152771 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.153415 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.153667 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.154263 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "f"], ["updated_at", "2018-07-13 21:04:40.153808"], ["id", 1]]
D, [2018-07-13T23:04:40.154473 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.154940 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."blocked" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["blocked", "f"]]
D, [2018-07-13T23:04:40.155387 #5670] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
D, [2018-07-13T23:04:40.155691 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.156017 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.156436 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.156852 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.157053 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.157306 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.157615 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.157798 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.158051 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.158434 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.158603 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.158849 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.159166 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.159325 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.159600 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.159983 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.160155 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.160446 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.160854 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.161026 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.161771 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.161951 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.162940 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.162462"], ["updated_at", "2018-07-13 21:04:40.162462"]]
D, [2018-07-13T23:04:40.163169 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.163879 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.164571 #5670] DEBUG -- :   [1m[36mFavorite Load (0.1ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 1], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.164776 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.165487 #5670] DEBUG -- :   [1m[36mFavorite Update (0.1ms)[0m  [1m[33mUPDATE "favorites" SET "blocked" = ?, "updated_at" = ? WHERE "favorites"."id" = ?[0m  [["blocked", "t"], ["updated_at", "2018-07-13 21:04:40.164983"], ["id", 1]]
D, [2018-07-13T23:04:40.165747 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.166351 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 2], ["favoritor_type", "User"], ["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.166526 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.167445 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.166982"], ["updated_at", "2018-07-13 21:04:40.166982"]]
D, [2018-07-13T23:04:40.167641 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.168216 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["blocked", "f"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.168397 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.168738 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.169177 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.169569 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.169772 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.170008 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.170331 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.170497 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.170761 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.171143 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.171314 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.171572 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.171902 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.172063 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.172330 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.172722 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.172894 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.173180 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.173580 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.173770 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.174413 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.174586 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.175547 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.175076"], ["updated_at", "2018-07-13 21:04:40.175076"]]
D, [2018-07-13T23:04:40.175748 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.176438 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? AND "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["scope", "favorite"], ["favoritor_id", 2], ["favoritor_type", "User"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.176751 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.177410 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "blocked", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["favoritor_id", 2], ["favoritor_type", "User"], ["blocked", "t"], ["created_at", "2018-07-13 21:04:40.176911"], ["updated_at", "2018-07-13 21:04:40.176911"]]
D, [2018-07-13T23:04:40.177599 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.178167 #5670] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "favorites" WHERE "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."blocked" = ? AND "favorites"."scope" = ?[0m  [["favoritable_id", 1], ["favoritable_type", "User"], ["blocked", "t"], ["scope", "favorite"]]
D, [2018-07-13T23:04:40.178333 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
D, [2018-07-13T23:04:40.178666 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
D, [2018-07-13T23:04:40.179192 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.179595 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Sam"]]
D, [2018-07-13T23:04:40.179782 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.180032 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.180361 #5670] DEBUG -- :   [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("name") VALUES (?)[0m  [["name", "Jon"]]
D, [2018-07-13T23:04:40.180527 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.180810 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.181220 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Oasis"]]
D, [2018-07-13T23:04:40.181438 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.181686 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.182130 #5670] DEBUG -- :   [1m[36mBand Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Metallica"]]
D, [2018-07-13T23:04:40.182321 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.182625 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.183036 #5670] DEBUG -- :   [1m[36mBand::Punk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Green Day"]]
D, [2018-07-13T23:04:40.183212 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.183504 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.183890 #5670] DEBUG -- :   [1m[36mBand::Punk::PopPunk Create (0.1ms)[0m  [1m[32mINSERT INTO "bands" ("name") VALUES (?)[0m  [["name", "Blink 182"]]
D, [2018-07-13T23:04:40.184076 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.184770 #5670] DEBUG -- :   [1m[36mFavorite Load (0.0ms)[0m  [1m[34mSELECT  "favorites".* FROM "favorites" WHERE "favorites"."favoritor_id" = ? AND "favorites"."favoritor_type" = ? AND "favorites"."favoritable_id" = ? AND "favorites"."favoritable_type" = ? AND "favorites"."scope" = ? ORDER BY "favorites"."id" ASC LIMIT ?[0m  [["favoritor_id", 1], ["favoritor_type", "User"], ["favoritable_id", 2], ["favoritable_type", "User"], ["scope", "favorite"], ["LIMIT", 1]]
D, [2018-07-13T23:04:40.184955 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.185973 #5670] DEBUG -- :   [1m[36mFavorite Create (0.1ms)[0m  [1m[32mINSERT INTO "favorites" ("favoritable_id", "favoritable_type", "favoritor_id", "favoritor_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["favoritable_id", 2], ["favoritable_type", "User"], ["favoritor_id", 1], ["favoritor_type", "User"], ["created_at", "2018-07-13 21:04:40.185489"], ["updated_at", "2018-07-13 21:04:40.185489"]]
D, [2018-07-13T23:04:40.186178 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
D, [2018-07-13T23:04:40.186419 #5670] DEBUG -- :   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
